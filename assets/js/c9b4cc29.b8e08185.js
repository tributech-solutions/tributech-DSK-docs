(self.webpackChunktributech_docs=self.webpackChunktributech_docs||[]).push([[225],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return u},kt:function(){return h}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(a),h=r,m=d["".concat(s,".").concat(h)]||d[h]||c[h]||i;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},1521:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var n=a(2122),r=a(9756),i=(a(7294),a(3905)),o=["components"],l={title:"Setup Bridge",sidebar_position:4},s="Install DSK IoT Hub Bridge",p={unversionedId:"quickstart/install-bridge",id:"quickstart/install-bridge",isDocsHomePage:!1,title:"Setup Bridge",description:"After the node is successfully deployed we can add an instance of the Azure IoT Hub. The IoT Hub is an external service provided by Azure rather than a part of the DataSpace Kit. That is why it has to be deployed separately in order to use it.",source:"@site/docs/quickstart/install-bridge.md",sourceDirName:"quickstart",slug:"/quickstart/install-bridge",permalink:"/docs/quickstart/install-bridge",editUrl:"https://github.com/tributech-solutions/tributech-dsk-docs/edit/master/docs/quickstart/install-bridge.md",version:"current",sidebarPosition:4,frontMatter:{title:"Setup Bridge",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Create a Dataset",permalink:"/docs/quickstart/create-dataset"},next:{title:"Setup IoT Device",permalink:"/docs/quickstart/setup-device"}},u=[{value:"Create a custom template deployment",id:"create-a-custom-template-deployment",children:[{value:"Navigate to the custom template deployment",id:"navigate-to-the-custom-template-deployment",children:[]},{value:"Navigate to the template editor",id:"navigate-to-the-template-editor",children:[]},{value:"Copy and paste the prepared template",id:"copy-and-paste-the-prepared-template",children:[]}]},{value:"Configure the deployment",id:"configure-the-deployment",children:[{value:"General parameters",id:"general-parameters",children:[]},{value:"Node specific parameters",id:"node-specific-parameters",children:[]},{value:"Finalize the deployment",id:"finalize-the-deployment",children:[]}]}],c={toc:u};function d(e){var t=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"install-dsk-iot-hub-bridge"},"Install DSK IoT Hub Bridge"),(0,i.kt)("p",null,"After the node is successfully deployed we can add an instance of the Azure IoT Hub. The IoT Hub is an external service provided by Azure rather than a part of the DataSpace Kit. That is why it has to be deployed separately in order to use it. ",(0,i.kt)("br",null),"\nThe IoT Hub provides Device-Management and Communication for our Edge Devices. While we use the Azure IoT Hub, it is also possible to integrate any other device management solution."),(0,i.kt)("p",null,"For easier deployment of the DSK IoT Hub Bridge we prepared an Azure Resource Manager (ARM) Template."),(0,i.kt)("h2",{id:"create-a-custom-template-deployment"},"Create a custom template deployment"),(0,i.kt)("h3",{id:"navigate-to-the-custom-template-deployment"},"Navigate to the custom template deployment"),(0,i.kt)("p",null,"Follow the link for the ",(0,i.kt)("a",{parentName:"p",href:"https://azuremarketplace.microsoft.com/en-us/marketplace/apps/Microsoft.Template?tab=Overview"},"Template Deployment"),' in the Azure Marketplace and click the "GET IT NOW" Button. A dialog will open where you have to agree to the terms and conditions.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Step 1",src:a(3568).Z})),(0,i.kt)("h3",{id:"navigate-to-the-template-editor"},"Navigate to the template editor"),(0,i.kt)("p",null,'Click "Build your own template in the editor" as shown below. A template editor is going to be shown.\n',(0,i.kt)("img",{alt:"Step 2",src:a(858).Z})),(0,i.kt)("h3",{id:"copy-and-paste-the-prepared-template"},"Copy and paste the prepared template"),(0,i.kt)("p",null,"Copy the ARM Template that can be found ",(0,i.kt)("a",{href:"https://github.com/tributech-solutions/tributech-dsk-docs/blob/master/docs/assets/iot-hub-arm-template/iotHubAndBridgeTemplate.json",target:"_blank"},"here"),' into the editor and click "Save".'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Step 3",src:a(9003).Z})),(0,i.kt)("h2",{id:"configure-the-deployment"},"Configure the deployment"),(0,i.kt)("p",null,"Now you will have to configure the deployment with parameters such as Resource group, Subscription etc., but also with some more specific parameters. This part will guide you through those steps."),(0,i.kt)("h3",{id:"general-parameters"},"General parameters"),(0,i.kt)("p",null,"Pick the Subscription and Resource group where you would like the deployment to be. It is recommended to ceate a new Resource group for this or alternatively use the one that was previously created for the owner node deployment. ",(0,i.kt)("br",null),"\nProceed to pick a location. As for the other settings up until including the Image Tag, the default values will most likely be fine."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Step 4",src:a(9072).Z})),(0,i.kt)("h3",{id:"node-specific-parameters"},"Node specific parameters"),(0,i.kt)("p",null,"This step is crucial, make sure to get the parameters right as described following.\nFor the IoT Hub to be able to connect to your new node it requires credentials.\nThus, there are a number of node specific parameters which you will have to provide."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Setting"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Image Tag"),(0,i.kt)("td",{parentName:"tr",align:null},"Current version of the DSK you are using. The default is likely fine.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Data Api Url"),(0,i.kt)("td",{parentName:"tr",align:null},"Url from the Data API")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Identity Server Url"),(0,i.kt)("td",{parentName:"tr",align:null},"Token Url of the Identity Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Auth Client"),(0,i.kt)("td",{parentName:"tr",align:null},"The Client ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Auth API Scope"),(0,i.kt)("td",{parentName:"tr",align:null},"Scope from the Data API")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Auth Client Secret"),(0,i.kt)("td",{parentName:"tr",align:null},"The Client secret")))),(0,i.kt)("p",null,"You can find those parameters easiest by navigating to the Data API Swagger UI and through the DataSpace Admin Administration."),(0,i.kt)("h4",{id:"retrieve-your-node-specific-parameters-from-the-dataspace-admin-app"},"Retrieve your node specific parameters from the DataSpace Admin App"),(0,i.kt)("p",null,"The following settings can be found in the DataSpace Admin App."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Setting"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Auth Client"),(0,i.kt)("td",{parentName:"tr",align:null},"The Client ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Auth Client Secret"),(0,i.kt)("td",{parentName:"tr",align:null},"The Client secret")))),(0,i.kt)("p",null,"In the DataSpace Admin App, navigate to the Administration as shown below."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Credentials Step 1",src:a(3605).Z})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Credentials Step 2",src:a(6210).Z})),(0,i.kt)("p",null,"The rest of the settings can be found in the Data API Swagger UI. The IoT Hub will use the Data API to connect to the node. Navigate to the Data API Swagger UI by following the link in the DataSpace Admin App as shown in the screenshot below."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Credentials Step 3",src:a(5384).Z})),(0,i.kt)("p",null,"A new tab will be opened showing the documentation of the Data-API.\nThe URL will be something like ",(0,i.kt)("a",{parentName:"p",href:"https://data-api.your-node-name.dataspace-node.com/"},"https://data-api.your-node-name.dataspace-node.com/"),". Copy and paste the URL of your Data API as the setting ",(0,i.kt)("strong",{parentName:"p"},'"Data Api Url"'),"."),(0,i.kt)("p",null,'Next, open the Authorization dialog by clicking the "Authorize" Button in the Swagger UI.\nYou can find the setting ',(0,i.kt)("strong",{parentName:"p"},'"Identity Server Url"'),' there through the "Token URL" parameter in the dialog. Check the screenshot below for further info.\nNote that you must only take the part of the Token URL without the ',(0,i.kt)("inlineCode",{parentName:"p"},"/connect/token")," part."),(0,i.kt)("p",null,"All that's missing now is the ",(0,i.kt)("strong",{parentName:"p"},'"Auth API Scope"'),' setting. You can find this through the "Scopes" section at the bottom of the Authorization dialog. Note that it is only the upper value shown there, as highlighted through the red box in the screenshot below. This value will most likely be ',(0,i.kt)("inlineCode",{parentName:"p"},"data-api-endpoint"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Credentials Step 4",src:a(4520).Z})),(0,i.kt)("h3",{id:"finalize-the-deployment"},"Finalize the deployment"),(0,i.kt)("p",null,'After inserting all the parameters and settings, click "Purchase".\nThe deployment will run for a couple of minutes. After the deployment is finished there should be a new instance of the Azure IoT Hub in the selected Resource group. This IoT Hub will be used in the following steps to deploy a simulated Edge Device.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Step 5",src:a(107).Z})))}d.isMDXComponent=!0},3605:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credentials-0-4816d504f74ac2e9e4b6bc46ecf1c545.png"},6210:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credentials-1-666a8ae94e876bfb21b0a4fd0b5c4c07.png"},5384:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credentials-2-956986e33a33e2683a5c22d18edb59f3.png"},4520:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credentials-3-18ed8b7f056ae65a85305a7c81e03f6f.png"},3568:function(e,t,a){"use strict";t.Z=a.p+"assets/images/iot-hub-bridge-0-f1dfd6c59cb61afa1bae8a1a4117278e.png"},858:function(e,t,a){"use strict";t.Z=a.p+"assets/images/iot-hub-bridge-1-86c74914c0a486a5b9dafc73877ec75d.png"},9003:function(e,t,a){"use strict";t.Z=a.p+"assets/images/iot-hub-bridge-2-256eb44a4d5faa14189c68884e23fddc.png"},9072:function(e,t,a){"use strict";t.Z=a.p+"assets/images/iot-hub-bridge-3-b87a541acd727bd8a2b11868175fb4ac.png"},107:function(e,t,a){"use strict";t.Z=a.p+"assets/images/iot-hub-bridge-4-3b113bd2bf647006d00457a5d5337e5d.png"}}]);